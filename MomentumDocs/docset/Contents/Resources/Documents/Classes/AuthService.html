<!DOCTYPE HTML>
<html>
	<head>
		<meta http-equiv="Content-Type" content="html/html; charset=utf-8" />
		<title>AuthService Class Reference</title>
		<meta id="xcode-display" name="xcode-display" content="render"/>
		<link rel="stylesheet" type="text/css" href="../css/styles.css" media="all" />
		<link rel="stylesheet" type="text/css" media="print" href="../css/stylesPrint.css" />
		<meta name="generator" content="appledoc 2.2 (build 963)" />
	</head>
	<body>
		<header id="top_header">
			<div id="library" class="hideInXcode">
				<h1><a id="libraryTitle" href="../index.html">Momentum </a></h1>
				<a id="developerHome" href="../index.html">Joe</a>
			</div>
			
			<div id="title" role="banner">
				<h1 class="hideInXcode">AuthService Class Reference</h1>
			</div>
			<ul id="headerButtons" role="toolbar">
				<li id="toc_button">
					<button aria-label="Show Table of Contents" role="checkbox" class="open" id="table_of_contents"><span class="disclosure"></span>Table of Contents</button>
				</li>
				<li id="jumpto_button" role="navigation">
					<select id="jumpTo">
	<option value="top">Jump To&#133;</option>
	
	
	
	
	<option value="tasks">Tasks</option>
	
	
	
	
	
	<option value="properties">Properties</option>
	
	<option value="//api/name/authProvider">&nbsp;&nbsp;&nbsp;&nbsp;authProvider</option>
	
	<option value="//api/name/client">&nbsp;&nbsp;&nbsp;&nbsp;client</option>
	
	<option value="//api/name/keychainName">&nbsp;&nbsp;&nbsp;&nbsp;keychainName</option>
	
	<option value="//api/name/receivedData">&nbsp;&nbsp;&nbsp;&nbsp;receivedData</option>
	
	<option value="//api/name/shouldRetryAuth">&nbsp;&nbsp;&nbsp;&nbsp;shouldRetryAuth</option>
	
	
	
	
	<option value="class_methods">Class Methods</option>
	
	<option value="//api/name/getInstance">&nbsp;&nbsp;&nbsp;&nbsp;+ getInstance</option>
	
	
	
	
	<option value="instance_methods">Instance Methods</option>
	
	<option value="//api/name/addQueryStringParamToRequest:">&nbsp;&nbsp;&nbsp;&nbsp;- addQueryStringParamToRequest:</option>
	
	<option value="//api/name/filterResponse:forData:withError:forRequest:onNext:onResponse:">&nbsp;&nbsp;&nbsp;&nbsp;- filterResponse:forData:withError:forRequest:onNext:onResponse:</option>
	
	<option value="//api/name/handleRequest:next:response:">&nbsp;&nbsp;&nbsp;&nbsp;- handleRequest:next:response:</option>
	
	<option value="//api/name/init">&nbsp;&nbsp;&nbsp;&nbsp;- init</option>
	
	<option value="//api/name/killAuthInfo">&nbsp;&nbsp;&nbsp;&nbsp;- killAuthInfo</option>
	
	<option value="//api/name/loadAuthInfo">&nbsp;&nbsp;&nbsp;&nbsp;- loadAuthInfo</option>
	
	<option value="//api/name/loginAccount:completion:">&nbsp;&nbsp;&nbsp;&nbsp;- loginAccount:completion:</option>
	
	<option value="//api/name/registerAccount:completion:">&nbsp;&nbsp;&nbsp;&nbsp;- registerAccount:completion:</option>
	
	<option value="//api/name/saveAuthInfo">&nbsp;&nbsp;&nbsp;&nbsp;- saveAuthInfo</option>
	
	<option value="//api/name/testForced401:withCompletion:">&nbsp;&nbsp;&nbsp;&nbsp;- testForced401:withCompletion:</option>
	
	<option value="//api/name/triggerLogout">&nbsp;&nbsp;&nbsp;&nbsp;- triggerLogout</option>
	
	
	
</select>
				</li>
			</ul>
		</header>
		<nav id="tocContainer" class="isShowingTOC">
			<ul id="toc" role="tree">
				



<li role="treeitem" id="task_treeitem"><span class="nodisclosure"></span><span class="sectionName"><a href="#tasks">Tasks</a></span><ul>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#task_Extension Methods">Extension Methods</a></span></li>
	
</ul></li>





<li role="treeitem" class="children"><span class="disclosure"></span><span class="sectionName"><a href="#properties">Properties</a></span><ul>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/authProvider">authProvider</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/client">client</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/keychainName">keychainName</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/receivedData">receivedData</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/shouldRetryAuth">shouldRetryAuth</a></span></li>
	
</ul></li>



<li role="treeitem" class="children"><span class="disclosure"></span><span class="sectionName"><a href="#class_methods">Class Methods</a></span><ul>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/getInstance">getInstance</a></span></li>
	
</ul></li>



<li role="treeitem" class="children"><span class="disclosure"></span><span class="sectionName"><a href="#instance_methods">Instance Methods</a></span><ul>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/addQueryStringParamToRequest:">addQueryStringParamToRequest:</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/filterResponse:forData:withError:forRequest:onNext:onResponse:">filterResponse:forData:withError:forRequest:onNext:onResponse:</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/handleRequest:next:response:">handleRequest:next:response:</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/init">init</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/killAuthInfo">killAuthInfo</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/loadAuthInfo">loadAuthInfo</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/loginAccount:completion:">loginAccount:completion:</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/registerAccount:completion:">registerAccount:completion:</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/saveAuthInfo">saveAuthInfo</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/testForced401:withCompletion:">testForced401:withCompletion:</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/triggerLogout">triggerLogout</a></span></li>
	
</ul></li>


			</ul>
		</nav>
		<article>
			<div id="contents" class="isShowingTOC" role="main">
				<a title="AuthService Class Reference" name="top"></a>
				<div class="main-navigation navigation-top">
					<ul>
	<li><a href="../index.html">Index</a></li>
	<li><a href="../hierarchy.html">Hierarchy</a></li>
</ul>
				</div>
				<div id="header">
					<div class="section-header">
						<h1 class="title title-header">AuthService Class Reference</h1>
					</div>		
				</div>
				<div id="container">	
					
					<div class="section section-specification"><table cellspacing="0"><tbody>
						<tr>
	<td class="specification-title">Inherits from</td>
	<td class="specification-value">NSObject</td>
</tr><tr>
	<td class="specification-title">Conforms to</td>
	<td class="specification-value">MSFilter</td>
</tr><tr>
	<td class="specification-title">Declared in</td>
	<td class="specification-value">AuthService.h<br />AuthService.m</td>
</tr>
						</tbody></table></div>
					
                    
                    
					
					
					
					<div class="section section-tasks">
						<a title="Tasks" name="tasks"></a>
						<h2 class="subtitle subtitle-tasks">Tasks</h2>
						
						
						
						<h3 class="subsubtitle task-title">Other Methods</h3>

						<ul class="task-list">
							<li>
	<span class="tooltip">
		<code><a href="#//api/name/authProvider">&nbsp;&nbsp;authProvider</a></code>
	</span>
	<span class="task-item-suffix">property</span>
	
</li><li>
	<span class="tooltip">
		<code><a href="#//api/name/client">&nbsp;&nbsp;client</a></code>
	</span>
	<span class="task-item-suffix">property</span>
	
</li><li>
	<span class="tooltip">
		<code><a href="#//api/name/getInstance">+&nbsp;getInstance</a></code>
	</span>
	
	
</li><li>
	<span class="tooltip">
		<code><a href="#//api/name/registerAccount:completion:">&ndash;&nbsp;registerAccount:completion:</a></code>
	</span>
	
	
</li><li>
	<span class="tooltip">
		<code><a href="#//api/name/loginAccount:completion:">&ndash;&nbsp;loginAccount:completion:</a></code>
	</span>
	
	
</li><li>
	<span class="tooltip">
		<code><a href="#//api/name/testForced401:withCompletion:">&ndash;&nbsp;testForced401:withCompletion:</a></code>
	</span>
	
	
</li><li>
	<span class="tooltip">
		<code><a href="#//api/name/saveAuthInfo">&ndash;&nbsp;saveAuthInfo</a></code>
	</span>
	
	
</li><li>
	<span class="tooltip">
		<code><a href="#//api/name/loadAuthInfo">&ndash;&nbsp;loadAuthInfo</a></code>
	</span>
	
	
</li><li>
	<span class="tooltip">
		<code><a href="#//api/name/killAuthInfo">&ndash;&nbsp;killAuthInfo</a></code>
	</span>
	
	
</li><li>
	<span class="tooltip">
		<code><a href="#//api/name/handleRequest:next:response:">&ndash;&nbsp;handleRequest:next:response:</a></code>
	</span>
	
	
</li>
						</ul>
						
						
						
						<h3 class="subsubtitle task-title">Other Methods</h3>

						<ul class="task-list">
							<li>
	<span class="tooltip">
		<code><a href="#//api/name/init">&ndash;&nbsp;init</a></code>
	</span>
	
	
</li><li>
	<span class="tooltip">
		<code><a href="#//api/name/filterResponse:forData:withError:forRequest:onNext:onResponse:">&ndash;&nbsp;filterResponse:forData:withError:forRequest:onNext:onResponse:</a></code>
	</span>
	
	
</li><li>
	<span class="tooltip">
		<code><a href="#//api/name/triggerLogout">&ndash;&nbsp;triggerLogout</a></code>
	</span>
	
	
</li><li>
	<span class="tooltip">
		<code><a href="#//api/name/addQueryStringParamToRequest:">&ndash;&nbsp;addQueryStringParamToRequest:</a></code>
	</span>
	
	
</li>
						</ul>
						
						
						<a title="Extension Methods" name="task_Extension Methods"></a>
						<h3 class="subsubtitle task-title">Extension Methods</h3>

						<ul class="task-list">
							<li>
	<span class="tooltip">
		<code><a href="#//api/name/shouldRetryAuth">&nbsp;&nbsp;shouldRetryAuth</a></code>
	</span>
	<span class="task-item-suffix">property</span>
	
</li><li>
	<span class="tooltip">
		<code><a href="#//api/name/keychainName">&nbsp;&nbsp;keychainName</a></code>
	</span>
	<span class="task-item-suffix">property</span>
	
</li><li>
	<span class="tooltip">
		<code><a href="#//api/name/receivedData">&nbsp;&nbsp;receivedData</a></code>
	</span>
	<span class="task-item-suffix">property</span>
	
</li>
						</ul>
						
					</div>
					
					
					
					
					
					<div class="section section-methods">
						<a title="Properties" name="properties"></a>
						<h2 class="subtitle subtitle-methods">Properties</h2>
						
						<div class="section-method">
	<a name="//api/name/authProvider" title="authProvider"></a>
	<h3 class="subsubtitle method-title">authProvider</h3>
	
	

	<div class="method-subsection method-declaration"><code>@property (nonatomic, strong) NSString *authProvider</code></div>

    
</div>
						
						<div class="section-method">
	<a name="//api/name/client" title="client"></a>
	<h3 class="subsubtitle method-title">client</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>Client that interfaces with the server</p>
	</div>		
	
    

	<div class="method-subsection method-declaration"><code>@property (nonatomic, strong) MSClient *client</code></div>

    
	
	
	
	
	
	
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">AuthService.h</code><br />
	</div>				
	
	
</div>
						
						<div class="section-method">
	<a name="//api/name/keychainName" title="keychainName"></a>
	<h3 class="subsubtitle method-title">keychainName</h3>
	
	

	<div class="method-subsection method-declaration"><code>@property (nonatomic, strong) NSString *keychainName</code></div>

    
</div>
						
						<div class="section-method">
	<a name="//api/name/receivedData" title="receivedData"></a>
	<h3 class="subsubtitle method-title">receivedData</h3>
	
	

	<div class="method-subsection method-declaration"><code>@property (nonatomic, strong) NSMutableData *receivedData</code></div>

    
</div>
						
						<div class="section-method">
	<a name="//api/name/shouldRetryAuth" title="shouldRetryAuth"></a>
	<h3 class="subsubtitle method-title">shouldRetryAuth</h3>
	
	

	<div class="method-subsection method-declaration"><code>@property (nonatomic) BOOL shouldRetryAuth</code></div>

    
</div>
						
					</div>
					
					
					
					<div class="section section-methods">
						<a title="Class Methods" name="class_methods"></a>
						<h2 class="subtitle subtitle-methods">Class Methods</h2>
						
						<div class="section-method">
	<a name="//api/name/getInstance" title="getInstance"></a>
	<h3 class="subsubtitle method-title">getInstance</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>Creates a new static instance(will stay in memory) of authService,
a singleton implementation. If an instance is already in memory it
will return that instance. Implemented as a singleton for ease of use
across multiple classes</p>
	</div>		
	
    

	<div class="method-subsection method-declaration"><code>+ (AuthService *)getInstance</code></div>

    
	
	
	
	<div class="method-subsection return">
		<h4 class="method-subtitle parameter-title">Return Value</h4>
		<p>reference to current authService</p>
	</div>
	
	
	
	
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">AuthService.h</code><br />
	</div>				
	
	
</div>
						
					</div>
					
					
					
					<div class="section section-methods">
						<a title="Instance Methods" name="instance_methods"></a>
						<h2 class="subtitle subtitle-methods">Instance Methods</h2>
						
						<div class="section-method">
	<a name="//api/name/addQueryStringParamToRequest:" title="addQueryStringParamToRequest:"></a>
	<h3 class="subsubtitle method-title">addQueryStringParamToRequest:</h3>
	
	

	<div class="method-subsection method-declaration"><code>- (NSMutableURLRequest *)addQueryStringParamToRequest:(NSMutableURLRequest *)<em>request</em></code></div>

    
</div>
						
						<div class="section-method">
	<a name="//api/name/filterResponse:forData:withError:forRequest:onNext:onResponse:" title="filterResponse:forData:withError:forRequest:onNext:onResponse:"></a>
	<h3 class="subsubtitle method-title">filterResponse:forData:withError:forRequest:onNext:onResponse:</h3>
	
	

	<div class="method-subsection method-declaration"><code>- (void)filterResponse:(NSHTTPURLResponse *)<em>response</em> forData:(NSData *)<em>data</em> withError:(NSError *)<em>error</em> forRequest:(NSURLRequest *)<em>request</em> onNext:(MSFilterNextBlock)<em>onNext</em> onResponse:(MSFilterResponseBlock)<em>onResponse</em></code></div>

    
</div>
						
						<div class="section-method">
	<a name="//api/name/handleRequest:next:response:" title="handleRequest:next:response:"></a>
	<h3 class="subsubtitle method-title">handleRequest:next:response:</h3>
	
	
	
	<div class="method-subsection brief-description">
		<ul>
<li>A method that is automatically invoked whenever there is a
 request made to the azure service, this method is part of
 the MSFilter protocol
*</li>
<li>@param request    request made to the azure service</li>
<li>@param onNext     onNext</li>
<li>@param onResponse response of the service</li>
</ul>

	</div>		
	
    

	<div class="method-subsection method-declaration"><code>- (void)handleRequest:(NSURLRequest *)<em>request</em> next:(MSFilterNextBlock)<em>onNext</em> response:(MSFilterResponseBlock)<em>onResponse</em></code></div>

    
	
	
	
	
	
	
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">AuthService.h</code><br />
	</div>				
	
	
</div>
						
						<div class="section-method">
	<a name="//api/name/init" title="init"></a>
	<h3 class="subsubtitle method-title">init</h3>
	
	

	<div class="method-subsection method-declaration"><code>- (AuthService *)init</code></div>

    
</div>
						
						<div class="section-method">
	<a name="//api/name/killAuthInfo" title="killAuthInfo"></a>
	<h3 class="subsubtitle method-title">killAuthInfo</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>Removes all the authentication info from the keychain. This
method is used when an error has occurred during authentication
or if the user wants to log out.</p>
	</div>		
	
    

	<div class="method-subsection method-declaration"><code>- (void)killAuthInfo</code></div>

    
	
	
	
	
	
	
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">AuthService.h</code><br />
	</div>				
	
	
</div>
						
						<div class="section-method">
	<a name="//api/name/loadAuthInfo" title="loadAuthInfo"></a>
	<h3 class="subsubtitle method-title">loadAuthInfo</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>Method that will load the authentication info into the MSClient from
the data stores in the keychain. This is called in the <a href="#//api/name/init">init</a> method of the class</p>
	</div>		
	
    

	<div class="method-subsection method-declaration"><code>- (void)loadAuthInfo</code></div>

    
	
	
	
	
	
	
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">AuthService.h</code><br />
	</div>				
	
	
</div>
						
						<div class="section-method">
	<a name="//api/name/loginAccount:completion:" title="loginAccount:completion:"></a>
	<h3 class="subsubtitle method-title">loginAccount:completion:</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>Logins in a user using their custom auth account</p>
	</div>		
	
    

	<div class="method-subsection method-declaration"><code>- (void)loginAccount:(NSDictionary *)<em>item</em> completion:(MSAPIBlock)<em>completion</em></code></div>

    
	
	<div class="method-subsection arguments-section parameters">
		<h4 class="method-subtitle parameter-title">Parameters</h4>
		
		<dl class="argument-def parameter-def">
			<dt><em>item</em></dt>
			<dd><p>NSDictionary to hold login credentials to send to the server</p></dd>
		</dl>
		
		<dl class="argument-def parameter-def">
			<dt><em>completion</em></dt>
			<dd><p>completion handler</p></dd>
		</dl>
		
	</div>
	
	
	
	
	
	
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">AuthService.h</code><br />
	</div>				
	
	
</div>
						
						<div class="section-method">
	<a name="//api/name/registerAccount:completion:" title="registerAccount:completion:"></a>
	<h3 class="subsubtitle method-title">registerAccount:completion:</h3>
	
	
	
	<div class="method-subsection brief-description">
		<ul>
<li>register an account using azure and get authentication
token back using the custom register. Uses a custom REST
api
*</li>
<li>@param item       NSDictionary that sends login info to server</li>
<li>@param completion completion handler for the method</li>
</ul>

	</div>		
	
    

	<div class="method-subsection method-declaration"><code>- (void)registerAccount:(NSDictionary *)<em>item</em> completion:(MSAPIBlock)<em>completion</em></code></div>

    
	
	
	
	
	
	
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">AuthService.h</code><br />
	</div>				
	
	
</div>
						
						<div class="section-method">
	<a name="//api/name/saveAuthInfo" title="saveAuthInfo"></a>
	<h3 class="subsubtitle method-title">saveAuthInfo</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>Method that will save authentication info from azure. The method will
be encrypted into the keychain using an auxillary keychain wrapper
class. The data encrypted is the data that has been stored inside
the MSClient; the authentication token and the user id.
When the information needs to be loaded again, loadAuthdata is
called which will load the data into the MSClient</p>
	</div>		
	
    

	<div class="method-subsection method-declaration"><code>- (void)saveAuthInfo</code></div>

    
	
	
	
	
	
	
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">AuthService.h</code><br />
	</div>				
	
	
</div>
						
						<div class="section-method">
	<a name="//api/name/testForced401:withCompletion:" title="testForced401:withCompletion:"></a>
	<h3 class="subsubtitle method-title">testForced401:withCompletion:</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>Calls a server side method that will by deftault return a 401
The retry parameter indicates if we should retry it after making the user
relogin.</p>
	</div>		
	
    

	<div class="method-subsection method-declaration"><code>- (void)testForced401:(BOOL)<em>shouldRetry</em> withCompletion:(CompletionWithStringBlock)<em>completion</em></code></div>

    
	
	
	
	
	
	
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">AuthService.h</code><br />
	</div>				
	
	
</div>
						
						<div class="section-method">
	<a name="//api/name/triggerLogout" title="triggerLogout"></a>
	<h3 class="subsubtitle method-title">triggerLogout</h3>
	
	

	<div class="method-subsection method-declaration"><code>- (void)triggerLogout</code></div>

    
</div>
						
					</div>
					
					
                    
                    
				</div>
				<div class="main-navigation navigation-bottom">
					<ul>
	<li><a href="../index.html">Index</a></li>
	<li><a href="../hierarchy.html">Hierarchy</a></li>
</ul>
				</div>
				<div id="footer">
					<hr />
					<div class="footer-copyright">
						<p><span class="copyright">&copy; 2014 Joe. All rights reserved. (Last updated: 2014-02-25)</span><br />
						
						<span class="generator">Generated by <a href="http://appledoc.gentlebytes.com">appledoc 2.2 (build 963)</a>.</span></p>
						
					</div>
				</div>
			</div>
		</article>
		<script type="text/javascript">
			function jumpToChange()
			{
				window.location.hash = this.options[this.selectedIndex].value;
			}
			
			function toggleTOC()
			{
				var contents = document.getElementById('contents');
				var tocContainer = document.getElementById('tocContainer');
				
				if (this.getAttribute('class') == 'open')
				{
					this.setAttribute('class', '');
					contents.setAttribute('class', '');
					tocContainer.setAttribute('class', '');
					
					window.name = "hideTOC";
				}
				else
				{
					this.setAttribute('class', 'open');
					contents.setAttribute('class', 'isShowingTOC');
					tocContainer.setAttribute('class', 'isShowingTOC');
					
					window.name = "";
				}
				return false;
			}
			
			function toggleTOCEntryChildren(e)
			{
				e.stopPropagation();
				var currentClass = this.getAttribute('class');
				if (currentClass == 'children') {
					this.setAttribute('class', 'children open');
				}
				else if (currentClass == 'children open') {
					this.setAttribute('class', 'children');
				}
				return false;
			}
			
			function tocEntryClick(e)
			{
				e.stopPropagation();
				return true;
			}
			
			function init()
			{
				var selectElement = document.getElementById('jumpTo');
				selectElement.addEventListener('change', jumpToChange, false);
				
				var tocButton = document.getElementById('table_of_contents');
				tocButton.addEventListener('click', toggleTOC, false);
				
				var taskTreeItem = document.getElementById('task_treeitem');
				if (taskTreeItem.getElementsByTagName('li').length > 0)
				{
					taskTreeItem.setAttribute('class', 'children');
					taskTreeItem.firstChild.setAttribute('class', 'disclosure');
				}
				
				var tocList = document.getElementById('toc');
				
				var tocEntries = tocList.getElementsByTagName('li');
				for (var i = 0; i < tocEntries.length; i++) {
					tocEntries[i].addEventListener('click', toggleTOCEntryChildren, false);
				}
				
				var tocLinks = tocList.getElementsByTagName('a');
				for (var i = 0; i < tocLinks.length; i++) {
					tocLinks[i].addEventListener('click', tocEntryClick, false);
				}
				
				if (window.name == "hideTOC") {
					toggleTOC.call(tocButton);
				}
			}
			
			window.onload = init;
			
			// If showing in Xcode, hide the TOC and Header
			if (navigator.userAgent.match(/xcode/i)) {
				document.getElementById("contents").className = "hideInXcode"
				document.getElementById("tocContainer").className = "hideInXcode"
				document.getElementById("top_header").className = "hideInXcode"
			}
			
		</script>
	</body>
</html>